{"numFailedTestSuites":1,"numFailedTests":2,"numPassedTestSuites":0,"numPassedTests":0,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":1,"numTotalTests":2,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1762035480128,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["auditService - logAudit"],"duration":6,"failing":false,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\nExpected number of calls: >= \u001b[32m1\u001b[39m\nReceived number of calls:    \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\nExpected number of calls: >= \u001b[32m1\u001b[39m\nReceived number of calls:    \u001b[31m0\u001b[39m\n    at Object.<anonymous> (G:\\ESTUDOS IA TRAE\\role\\backend\\src\\__tests__\\services\\auditService.test.ts:29:26)"],"fullName":"auditService - logAudit should store audit event and call logger.info on success","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1762035485245,"status":"failed","title":"should store audit event and call logger.info on success"},{"ancestorTitles":["auditService - logAudit"],"duration":2,"failing":false,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\nExpected number of calls: >= \u001b[32m1\u001b[39m\nReceived number of calls:    \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\nExpected number of calls: >= \u001b[32m1\u001b[39m\nReceived number of calls:    \u001b[31m0\u001b[39m\n    at Object.<anonymous> (G:\\ESTUDOS IA TRAE\\role\\backend\\src\\__tests__\\services\\auditService.test.ts:35:26)"],"fullName":"auditService - logAudit should not throw on failure and call logger.warn","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1762035485258,"status":"failed","title":"should not throw on failure and call logger.warn"}],"endTime":1762035485275,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mauditService - logAudit › should store audit event and call logger.info on success\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\n    Expected number of calls: >= \u001b[32m1\u001b[39m\n    Received number of calls:    \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 27 |\u001b[39m     \u001b[36mawait\u001b[39m logAudit({ action\u001b[33m:\u001b[39m \u001b[32m'role_create'\u001b[39m\u001b[33m,\u001b[39m uid\u001b[33m:\u001b[39m \u001b[32m'u1'\u001b[39m\u001b[33m,\u001b[39m roleId\u001b[33m:\u001b[39m \u001b[32m'r1'\u001b[39m\u001b[33m,\u001b[39m before\u001b[33m:\u001b[39m \u001b[36mnull\u001b[39m\u001b[33m,\u001b[39m after\u001b[33m:\u001b[39m { foo\u001b[33m:\u001b[39m \u001b[32m'bar'\u001b[39m } })\u001b[22m\n\u001b[2m     \u001b[90m 28 |\u001b[39m     expect(addMock)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 29 |\u001b[39m     expect(pinoMod\u001b[33m.\u001b[39minfo)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 30 |\u001b[39m   })\u001b[22m\n\u001b[2m     \u001b[90m 31 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 32 |\u001b[39m   it(\u001b[32m'should not throw on failure and call logger.warn'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/__tests__/services/auditService.test.ts\u001b[39m\u001b[0m\u001b[2m:29:26)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mauditService - logAudit › should not throw on failure and call logger.warn\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalled\u001b[2m()\u001b[22m\n\n    Expected number of calls: >= \u001b[32m1\u001b[39m\n    Received number of calls:    \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 33 |\u001b[39m     addMock\u001b[33m.\u001b[39mmockRejectedValueOnce(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'fail'\u001b[39m))\u001b[22m\n\u001b[2m     \u001b[90m 34 |\u001b[39m     \u001b[36mawait\u001b[39m logAudit({ action\u001b[33m:\u001b[39m \u001b[32m'role_delete'\u001b[39m\u001b[33m,\u001b[39m uid\u001b[33m:\u001b[39m \u001b[32m'u2'\u001b[39m\u001b[33m,\u001b[39m roleId\u001b[33m:\u001b[39m \u001b[32m'r2'\u001b[39m\u001b[33m,\u001b[39m before\u001b[33m:\u001b[39m { a\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m }\u001b[33m,\u001b[39m after\u001b[33m:\u001b[39m \u001b[36mnull\u001b[39m })\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 35 |\u001b[39m     expect(pinoMod\u001b[33m.\u001b[39mwarn)\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 36 |\u001b[39m   })\u001b[22m\n\u001b[2m     \u001b[90m 37 |\u001b[39m })\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/__tests__/services/auditService.test.ts\u001b[39m\u001b[0m\u001b[2m:35:26)\u001b[22m\u001b[2m\u001b[22m\n","name":"G:\\ESTUDOS IA TRAE\\role\\backend\\src\\__tests__\\services\\auditService.test.ts","startTime":1762035480264,"status":"failed","summary":""}],"wasInterrupted":false}
